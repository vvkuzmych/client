"""
Autogenerated return type of CreateUser.
"""
type CreateUserPayload {
  """
  List of errors if creation failed
  """
  errors: [String!]!

  """
  The created user
  """
  user: User
}

"""
Autogenerated return type of DeleteUser.
"""
type DeleteUserPayload {
  """
  List of errors if deletion failed
  """
  errors: [String!]!

  """
  Whether the deletion was successful
  """
  success: Boolean!
}

"""
A document in the document flow system
"""
type Document {
  activities: [DocumentActivity!]!
  authorId: Int
  comments: [DocumentComment!]!
  content: String
  createdAt: ISO8601DateTime!
  currentVersion: DocumentVersion
  id: ID!
  status: String!
  title: String!
  updatedAt: ISO8601DateTime!
  versions: [DocumentVersion!]!
}

"""
An activity log entry for a document
"""
type DocumentActivity {
  activityType: String!
  createdAt: ISO8601DateTime!
  description: String
  document: Document!
  documentId: ID!
  id: ID!
  performedById: Int
  updatedAt: ISO8601DateTime!
}

"""
A comment on a document
"""
type DocumentComment {
  authorId: Int
  comment: String!
  createdAt: ISO8601DateTime!
  document: Document!
  documentId: ID!
  id: ID!
  updatedAt: ISO8601DateTime!
}

"""
A version of a document
"""
type DocumentVersion {
  content: String
  createdAt: ISO8601DateTime!
  document: Document!
  documentId: ID!
  id: ID!
  title: String!
  updatedAt: ISO8601DateTime!
  versionNumber: Int!
}

"""
An ISO 8601-encoded datetime
"""
scalar ISO8601DateTime @specifiedBy(url: "https://tools.ietf.org/html/rfc3339")

"""
The mutation root of this schema
"""
type Mutation {
  """
  Create a new user
  """
  createUser(
    """
    User email
    """
    email: String!

    """
    User handle
    """
    handle: String!
  ): CreateUserPayload

  """
  Delete a user
  """
  deleteUser(
    """
    The user ID
    """
    id: ID!
  ): DeleteUserPayload

  """
  Update an existing user
  """
  updateUser(
    """
    New user email
    """
    email: String

    """
    New user handle
    """
    handle: String

    """
    The user ID
    """
    id: ID!
  ): UpdateUserPayload
}

"""
The query root of this schema
"""
type Query {
  """
  Returns a single document
  """
  document(
    """
    The document ID
    """
    id: ID!
  ): Document

  """
  Returns activities for a document
  """
  documentActivities(
    """
    Filter by activity type
    """
    activityType: String

    """
    The document ID
    """
    documentId: ID!
  ): [DocumentActivity!]!

  """
  Returns comments for a document
  """
  documentComments(
    """
    The document ID
    """
    documentId: ID!
  ): [DocumentComment!]!

  """
  Returns versions for a document
  """
  documentVersions(
    """
    The document ID
    """
    documentId: ID!
  ): [DocumentVersion!]!

  """
  Returns all documents
  """
  documents(
    """
    Limit the number of results
    """
    limit: Int = 10

    """
    Filter by status
    """
    status: String
  ): [Document!]!

  """
  Returns a single user
  """
  user(
    """
    The user ID
    """
    id: ID!
  ): User

  """
  Returns all users
  """
  users(
    """
    Limit the number of results
    """
    limit: Int

    """
    Number of users to skip
    """
    offset: Int = 0
  ): [User!]!
}

"""
Autogenerated return type of UpdateUser.
"""
type UpdateUserPayload {
  """
  List of errors if update failed
  """
  errors: [String!]!

  """
  The updated user
  """
  user: User
}

"""
A user in the system
"""
type User {
  createdAt: ISO8601DateTime!
  email: String!
  handle: String!
  id: ID!
  updatedAt: ISO8601DateTime!
}
